import{_ as Z,r as U,y as w,k as D,l as z,c as p,f as G,a as t,t as d,n as b,e as y,w as S,b as o,D as O,G as R,v as u,d as h,F as Y,m as H,p as c,o as m,A as j,q as v}from"./index-BtwKz26K.js";import{B as J}from"./BackButton--LrscsgX.js";const Q={key:0,class:"view-order"},W={class:"page-title"},X={class:"page-title"},_={class:"order-summary"},ee={class:"summary-card"},te={class:"info-section"},re={class:"info-section"},ae={class:"form-group"},ie=["disabled"],se={class:"info-section"},ne={class:"form-group"},le={class:"form-group"},oe={class:"form-group"},de={class:"form-group"},ue=["disabled"],pe={class:"form-group"},me={class:"form-group"},ve={class:"form-group"},ye={class:"form-group"},fe={class:"form-group"},ge={class:"form-group"},be={key:0,class:"form-group"},ce=["disabled"],De={class:"info-section"},Se={class:"form-group"},he={key:0},xe={class:"form-group"},Be={class:"form-group"},we={key:1},Oe={class:"form-group"},ke={key:2},Ne={class:"form-group"},Ce=["disabled"],Ve={class:"products-section"},Ae={class:"product-list"},Ee=["src","alt"],Ue={class:"product-info"},Fe={key:1,class:"loading"},qe={__name:"ViewOrder",setup(Pe){const F=j(),a=U(null),f=U(""),l=w({carrier:"",deliveryStatus:"",estimatedDeliveryDate:"",shippingDate:""}),n=w({country:"",state:"",city:"",postalCode:"",street:"",houseNumber:"",addressAddition:""}),s=w({paymentOption:"",creditCardNumber:"",expiryDate:"",paypalEmail:"",iban:""}),q=i=>({open:"Offen",processing:"In Bearbeitung",successful:"Erfolgreich",failed:"Fehlgeschlagen",refunded:"Erstattet",canceled:"Storniert"})[i]||i,x=i=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(i),k=i=>i?new Date(i).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric"}):"Kein Datum",N=D(()=>{var i;return f.value!==(((i=a.value)==null?void 0:i.orderStatus)||"")}),C=D(()=>{var i;return(i=a.value)!=null&&i.shipping?l.carrier!==a.value.shipping.carrier||l.deliveryStatus!==a.value.shipping.deliveryStatus||l.estimatedDeliveryDate!==g(a.value.shipping.estimatedDeliveryDate)||l.shippingDate!==g(a.value.shipping.shippingDate):!1}),V=D(()=>{var i,e;return(e=(i=a.value)==null?void 0:i.shipping)!=null&&e.address?n.country!==a.value.shipping.address.country||n.city!==a.value.shipping.address.city||n.postalCode!==a.value.shipping.address.postalCode||n.street!==a.value.shipping.address.street||n.houseNumber!==a.value.shipping.address.houseNumber||(n.addressAddition||"")!==(a.value.shipping.address.addressAddition||""):!1}),A=D(()=>{var i;return(i=a.value)!=null&&i.payment?s.paymentOption!==a.value.payment.paymentOption||s.paymentOption==="credit card"&&s.creditCardNumber!==a.value.payment.creditCardNumber||s.paymentOption==="credit card"&&s.expiryDate!==E(a.value.payment.expiryDate)||s.paymentOption==="paypal"&&s.paypalEmail!==a.value.payment.paypalEmail||s.paymentOption==="bank transfer"&&s.iban!==a.value.payment.iban:!1}),P=async()=>{try{const i=F.params.id,{data:e}=await c.get(`/api/order/${i}`);a.value=e,I()}catch(i){console.error("Fehler beim Laden der Bestellung:",i)}},I=()=>{a.value&&(f.value=a.value.orderStatus,l.carrier=a.value.shipping.carrier,l.deliveryStatus=a.value.shipping.deliveryStatus,l.estimatedDeliveryDate=g(a.value.shipping.estimatedDeliveryDate),l.shippingDate=g(a.value.shipping.shippingDate),n.country=a.value.shipping.address.country,n.city=a.value.shipping.address.city,n.postalCode=a.value.shipping.address.postalCode,n.street=a.value.shipping.address.street,n.houseNumber=a.value.shipping.address.houseNumber,n.addressAddition=a.value.shipping.address.addressAddition||"",s.paymentOption=a.value.payment.paymentOption,s.creditCardNumber=a.value.payment.creditCardNumber||"",s.expiryDate=a.value.payment.expiryDate?E(a.value.payment.expiryDate):"",s.paypalEmail=a.value.payment.paypalEmail||"",s.iban=a.value.payment.iban||"")},g=i=>{if(!i)return"";const e=new Date(i);if(isNaN(e.getTime()))return console.warn("Ungültiges Datum:",i),"";const r=e.getFullYear(),B=String(e.getMonth()+1).padStart(2,"0"),T=String(e.getDate()).padStart(2,"0");return`${r}-${B}-${T}`},E=i=>{if(!i)return"";const e=new Date(i),r=e.getFullYear(),B=String(e.getMonth()+1).padStart(2,"0");return`${r}-${B}`},$=async()=>{var i,e;try{const r={orderStatus:f.value};await c.patch(`/api/order/${a.value.id}/status`,r),a.value.orderStatus=f.value,await v.fire({backdrop:!1,title:"Status geupdated!",text:`Der Status der Bestellung: "${a.value.id}" wurde erfolgreich geupdated.`,icon:"success",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}catch(r){console.error("Fehler beim Statusupdate der Bestellung:",r),await v.fire({backdrop:!1,title:"Fehler beim Statusupdate der Bestellung!",text:((e=(i=r.response)==null?void 0:i.data)==null?void 0:e.error)||"Ein unbekannter Fehler ist aufgetreten.",icon:"error",confirmButtonText:"OK"})}},L=async()=>{var i,e;try{const r={carrier:l.carrier,deliveryStatus:l.deliveryStatus,estimatedDeliveryDate:g(new Date(l.estimatedDeliveryDate).toISOString()),shippingDate:g(new Date(l.shippingDate).toISOString())};await c.patch(`/api/order/${a.value.id}/shipping`,r),a.value.shipping={...a.value.shipping,...r},await v.fire({backdrop:!1,title:"Versandinformationen geupdated!",text:`Die Versandinformation der Bestellung: "${a.value.id}" wurde erfolgreich geupdated.`,icon:"success",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}catch(r){console.error("Fehler beim Updaten der Versandinformation:",r),await v.fire({backdrop:!1,title:"Fehler beim Update der Versandinformation der Bestellung!",text:((e=(i=r.response)==null?void 0:i.data)==null?void 0:e.error)||"Ein unbekannter Fehler ist aufgetreten.",icon:"error",confirmButtonText:"OK"})}},M=async()=>{var i,e;try{const r={country:n.country,state:n.state,city:n.city,postalCode:n.postalCode,street:n.street,houseNumber:n.houseNumber,addressAddition:n.addressAddition||null};await c.patch(`/api/order/${a.value.id}/address`,r),a.value.shipping.address={...a.value.shipping.address,...r},await v.fire({backdrop:!1,title:"Lieferadresse geupdated!",text:`Die Lieferadresse der Bestellung: "${a.value.id}" wurde erfolgreich geupdated.`,icon:"success",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}catch(r){console.error("Fehler beim Updaten der Lieferadresse:",r),await v.fire({backdrop:!1,title:"Fehler beim Update der Lieferadresse der Bestellung!",text:((e=(i=r.response)==null?void 0:i.data)==null?void 0:e.error)||"Ein unbekannter Fehler ist aufgetreten.",icon:"error",confirmButtonText:"OK"})}},K=async()=>{var i,e;try{const r={paymentOption:s.paymentOption,creditCardNumber:s.paymentOption==="credit card"?s.creditCardNumber:null,expiryDate:s.paymentOption==="credit card"?new Date(s.expiryDate+"-01").toISOString():null,paypalEmail:s.paymentOption==="paypal"?s.paypalEmail:null,iban:s.paymentOption==="bank transfer"?s.iban:null};await c.patch(`/api/order/${a.value.id}/payment`,r),a.value.payment={...a.value.payment,...r},await v.fire({backdrop:!1,title:"Zahlungsinformationen geupdated!",text:`Die Zahlungsinformationen der Bestellung: "${a.value.id}" wurde erfolgreich geupdated.`,icon:"success",showConfirmButton:!1,timer:2e3,timerProgressBar:!0})}catch(r){console.error("Fehler beim Update der Zahlungsinformationen:",r),await v.fire({backdrop:!1,title:"Fehler beim Update der Zahlungsinformationen der Bestellung!",text:((e=(i=r.response)==null?void 0:i.data)==null?void 0:e.error)||"Ein unbekannter Fehler ist aufgetreten.",icon:"error",confirmButtonText:"OK"})}};return z(()=>{P()}),(i,e)=>a.value?(m(),p("div",Q,[G(J),t("h2",W,"Bestellung #"+d(a.value.id),1),t("div",X,[t("span",{class:b(["status",a.value.orderStatus])},d(q(a.value.orderStatus)),3)]),t("main",null,[t("section",_,[t("div",ee,[e[20]||(e[20]=t("h3",null,"Bestellübersicht",-1)),t("ul",null,[t("li",null,[e[17]||(e[17]=t("span",null,"Gesamtbetrag:",-1)),t("span",null,d(x(a.value.totalAmount)),1)]),t("li",null,[e[18]||(e[18]=t("span",null,"Erstellt:",-1)),t("span",null,d(k(a.value.createdAt)),1)]),t("li",null,[e[19]||(e[19]=t("span",null,"Aktualisiert:",-1)),t("span",null,d(k(a.value.updatedAt)),1)])])])]),t("section",te,[e[25]||(e[25]=t("h3",null,"Benutzerinformationen",-1)),t("ul",null,[t("li",null,[e[21]||(e[21]=t("strong",null,"Benutzer ID:",-1)),y(" "+d(a.value.user.id),1)]),t("li",null,[e[22]||(e[22]=t("strong",null,"Vorname:",-1)),y(" "+d(a.value.user.firstName),1)]),t("li",null,[e[23]||(e[23]=t("strong",null,"Nachname:",-1)),y(" "+d(a.value.user.lastName),1)]),t("li",null,[e[24]||(e[24]=t("strong",null,"Email:",-1)),y(" "+d(a.value.user.emailAddress),1)])])]),t("section",re,[e[28]||(e[28]=t("h3",null,"Status der Bestellung",-1)),t("form",{onSubmit:S($,["prevent"])},[t("div",ae,[e[27]||(e[27]=t("label",{for:"orderStatus"},"Bestellstatus:",-1)),o(t("select",{id:"orderStatus","onUpdate:modelValue":e[0]||(e[0]=r=>f.value=r),required:""},e[26]||(e[26]=[R('<option value="open" data-v-f91e7bea>Offen</option><option value="processing" data-v-f91e7bea>In Bearbeitung</option><option value="successful" data-v-f91e7bea>Erfolgreich</option><option value="failed" data-v-f91e7bea>Fehlgeschlagen</option><option value="refunded" data-v-f91e7bea>Erstattet</option><option value="canceled" data-v-f91e7bea>Storniert</option>',6)]),512),[[O,f.value]])]),t("button",{type:"submit",class:b(["btn",{"btn-disabled":!N.value}]),disabled:!N.value}," Aktualisieren ",10,ie)],32)]),t("section",se,[e[41]||(e[41]=t("h3",null,"Versandinformationen",-1)),t("form",{onSubmit:S(L,["prevent"])},[t("div",ne,[e[29]||(e[29]=t("label",{for:"carrier"},"Versanddienst:",-1)),o(t("input",{type:"text",id:"carrier","onUpdate:modelValue":e[1]||(e[1]=r=>l.carrier=r),required:""},null,512),[[u,l.carrier]])]),t("div",le,[e[31]||(e[31]=t("label",{for:"deliveryStatus"},"Lieferstatus:",-1)),o(t("select",{id:"deliveryStatus","onUpdate:modelValue":e[2]||(e[2]=r=>l.deliveryStatus=r),required:""},e[30]||(e[30]=[t("option",{value:"not shipped"},"Nicht versandt",-1),t("option",{value:"shipped"},"Versandt",-1),t("option",{value:"delivered"},"Geliefert",-1)]),512),[[O,l.deliveryStatus]])]),t("div",oe,[e[32]||(e[32]=t("label",{for:"estimatedDeliveryDate"},"Geschätztes Lieferdatum:",-1)),o(t("input",{type:"date",id:"estimatedDeliveryDate","onUpdate:modelValue":e[3]||(e[3]=r=>l.estimatedDeliveryDate=r),required:""},null,512),[[u,l.estimatedDeliveryDate]])]),t("div",de,[e[33]||(e[33]=t("label",{for:"shippingDate"},"Versanddatum:",-1)),o(t("input",{type:"date",id:"shippingDate","onUpdate:modelValue":e[4]||(e[4]=r=>l.shippingDate=r),required:""},null,512),[[u,l.shippingDate]])]),t("button",{type:"submit",class:b(["btn",{"btn-disabled":!C.value}]),disabled:!C.value}," Aktualisieren ",10,ue)],32),e[42]||(e[42]=t("hr",{class:"section-divider"},null,-1)),e[43]||(e[43]=t("h4",null,"Lieferadresse",-1)),t("form",{onSubmit:S(M,["prevent"])},[t("div",pe,[e[34]||(e[34]=t("label",{for:"country"},"Land:",-1)),o(t("input",{type:"text",id:"country","onUpdate:modelValue":e[5]||(e[5]=r=>n.country=r),required:""},null,512),[[u,n.country]])]),t("div",me,[e[35]||(e[35]=t("label",{for:"state"},"Bundesland(optional):",-1)),o(t("input",{type:"text",id:"state","onUpdate:modelValue":e[6]||(e[6]=r=>n.state=r)},null,512),[[u,n.state]])]),t("div",ve,[e[36]||(e[36]=t("label",{for:"city"},"Stadt:",-1)),o(t("input",{type:"text",id:"city","onUpdate:modelValue":e[7]||(e[7]=r=>n.city=r),required:""},null,512),[[u,n.city]])]),t("div",ye,[e[37]||(e[37]=t("label",{for:"postalCode"},"Postleitzahl:",-1)),o(t("input",{type:"text",id:"postalCode","onUpdate:modelValue":e[8]||(e[8]=r=>n.postalCode=r),required:""},null,512),[[u,n.postalCode]])]),t("div",fe,[e[38]||(e[38]=t("label",{for:"street"},"Straße:",-1)),o(t("input",{type:"text",id:"street","onUpdate:modelValue":e[9]||(e[9]=r=>n.street=r),required:""},null,512),[[u,n.street]])]),t("div",ge,[e[39]||(e[39]=t("label",{for:"houseNumber"},"Hausnummer:",-1)),o(t("input",{type:"text",id:"houseNumber","onUpdate:modelValue":e[10]||(e[10]=r=>n.houseNumber=r),required:""},null,512),[[u,n.houseNumber]])]),a.value.shipping.address.addressAddition?(m(),p("div",be,[e[40]||(e[40]=t("label",{for:"addressAddition"},"Zusatz:",-1)),o(t("input",{type:"text",id:"addressAddition","onUpdate:modelValue":e[11]||(e[11]=r=>n.addressAddition=r)},null,512),[[u,n.addressAddition]])])):h("",!0),t("button",{type:"submit",class:b(["btn",{"btn-disabled":!V.value}]),disabled:!V.value}," Aktualisieren ",10,ce)],32)]),t("section",De,[e[50]||(e[50]=t("h3",null,"Zahlungsinformationen",-1)),t("form",{onSubmit:S(K,["prevent"])},[t("div",Se,[e[45]||(e[45]=t("label",{for:"paymentOption"},"Zahlungsmethode:",-1)),o(t("select",{id:"paymentOption","onUpdate:modelValue":e[12]||(e[12]=r=>s.paymentOption=r),required:""},e[44]||(e[44]=[t("option",{value:"credit card"},"Kreditkarte",-1),t("option",{value:"paypal"},"PayPal",-1),t("option",{value:"bank transfer"},"Banküberweisung",-1)]),512),[[O,s.paymentOption]])]),s.paymentOption==="credit card"?(m(),p("div",he,[t("div",xe,[e[46]||(e[46]=t("label",{for:"creditCardNumber"},"Kreditkartennummer:",-1)),o(t("input",{type:"text",id:"creditCardNumber","onUpdate:modelValue":e[13]||(e[13]=r=>s.creditCardNumber=r),required:""},null,512),[[u,s.creditCardNumber]])]),t("div",Be,[e[47]||(e[47]=t("label",{for:"expiryDate"},"Ablaufdatum:",-1)),o(t("input",{type:"month",id:"expiryDate","onUpdate:modelValue":e[14]||(e[14]=r=>s.expiryDate=r),required:""},null,512),[[u,s.expiryDate]])])])):h("",!0),s.paymentOption==="paypal"?(m(),p("div",we,[t("div",Oe,[e[48]||(e[48]=t("label",{for:"paypalEmail"},"PayPal Email:",-1)),o(t("input",{type:"email",id:"paypalEmail","onUpdate:modelValue":e[15]||(e[15]=r=>s.paypalEmail=r),required:""},null,512),[[u,s.paypalEmail]])])])):h("",!0),s.paymentOption==="bank transfer"?(m(),p("div",ke,[t("div",Ne,[e[49]||(e[49]=t("label",{for:"iban"},"IBAN:",-1)),o(t("input",{type:"text",id:"iban","onUpdate:modelValue":e[16]||(e[16]=r=>s.iban=r),required:""},null,512),[[u,s.iban]])])])):h("",!0),t("button",{type:"submit",class:b(["btn",{"btn-disabled":!A.value}]),disabled:!A.value}," Aktualisieren ",10,Ce)],32)]),t("section",Ve,[e[54]||(e[54]=t("h3",null,"Produkte",-1)),t("div",Ae,[(m(!0),p(Y,null,H(a.value.orderProducts,r=>(m(),p("div",{key:r.id,class:"product-card"},[t("img",{src:r.product.image,alt:r.product.name},null,8,Ee),t("div",Ue,[t("h4",null,d(r.product.name),1),t("p",null,d(r.product.description),1),t("ul",null,[t("li",null,[e[51]||(e[51]=t("strong",null,"Preis:",-1)),y(" "+d(x(r.product.price)),1)]),t("li",null,[e[52]||(e[52]=t("strong",null,"Menge:",-1)),y(" "+d(r.quantity),1)]),t("li",null,[e[53]||(e[53]=t("strong",null,"Gesamt:",-1)),y(" "+d(x(r.product.price*r.quantity)),1)])])])]))),128))])])])])):(m(),p("div",Fe,e[55]||(e[55]=[t("p",null,"Bestelldaten werden geladen...",-1)])))}},Le=Z(qe,[["__scopeId","data-v-f91e7bea"]]);export{Le as default};
