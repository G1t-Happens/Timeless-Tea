import{_ as F,u as M,k as T,r as o,l as V,c as s,a as t,t as C,d as p,e as k,f as x,S as L,F as P,m as B,p as D,q as O,o as a,P as K,s as W}from"./index-DAGLbK9s.js";const z={class:"user-dashboard"},E={class:"header"},J={key:0,class:"welcome-message"},$={class:"search-section mb-4"},j={key:0,class:"text-center"},I={key:1,class:"text-center"},Q={key:2},R={class:"row row-cols-lg-4"},q={key:0,class:"text-center mt-4"},G={key:1,class:"text-center mt-4"},H=8,X={__name:"UserDashboard",setup(Y){const h=W(),u=M(),f=T(()=>!u.user||!u.user.firstName||!u.user.lastName?null:`${u.user.firstName} ${u.user.lastName}`),N=()=>{h.push({name:"OrderDetail"})},S=()=>{h.push({name:"WishList"})},w=()=>{h.push({name:"UserEditUser"})},r=o([]),n=o(""),c=o({articles:!1}),m=o({categories:[],price:0,rating:0,page:1,size:8}),d=o(1),v=o({articles:!0}),b=async({query:g=n.value,filters:e=m.value}={})=>{var _,y;g!==n.value&&(n.value=g.trim(),d.value=1,r.value=[],v.value.articles=!0),e&&JSON.stringify(e)!==JSON.stringify(m.value)&&(m.value={...e},d.value=1),c.value.articles=!0;const l=e.categories&&e.categories.length>0?e.categories.join(","):void 0,A=e.price&&e.price!==0?e.price:void 0;try{const i=await D.get("/api/product",{params:{search:g||void 0,categories:l,price:A,rating:e.rating||void 0,page:d.value,size:H}});d.value===1?r.value=i.data.products:r.value.push(...i.data.products),v.value.articles=i.data.hasMore}catch(i){console.error("Fehler beim Laden der Artikel:",i),await O.fire({title:"Fehler beim Laden der Artikel",text:((y=(_=i.response)==null?void 0:_.data)==null?void 0:y.error)||"Ein unbekannter Fehler ist aufgetreten.",icon:"error",confirmButtonText:"OK"})}finally{c.value.articles=!1}},U=async()=>{v.value.articles&&(d.value++,await b({query:n.value,filters:m.value}))};return V(()=>{b()}),(g,e)=>(a(),s("div",z,[t("div",E,[e[1]||(e[1]=t("h1",{class:"text-center user-title"},"User Dashboard",-1)),f.value?(a(),s("h2",J,"Willkommen, "+C(f.value)+"!",1)):p("",!0)]),t("div",{class:"navigation mb-4"},[t("button",{onClick:N,class:"btn navigation-btn"},e[2]||(e[2]=[t("i",{class:"bi bi-cart-check me-2"},null,-1),k(" Meine Bestellungen ")])),t("button",{onClick:S,class:"btn navigation-btn"},e[3]||(e[3]=[t("i",{class:"bi bi-heart me-2"},null,-1),k(" Meine Wunschliste ")])),t("button",{onClick:w,class:"btn navigation-btn"},e[4]||(e[4]=[t("i",{class:"bi bi-gear me-2"},null,-1),k(" Meine Kontoeinstellungen ")]))]),t("div",$,[x(L,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=l=>n.value=l),onSearch:b,placeholder:"Artikel suchen...",showFilter:!0},null,8,["modelValue"])]),c.value.articles&&r.value.length===0?(a(),s("div",j,e[5]||(e[5]=[t("p",null,"Lade Artikel...",-1)]))):p("",!0),!c.value.articles&&r.value.length===0?(a(),s("div",I,e[6]||(e[6]=[t("p",null,"Keine Produkte gefunden.",-1)]))):(a(),s("div",Q,[t("div",R,[(a(!0),s(P,null,B(r.value,l=>(a(),s("div",{key:l.id,class:"col mb-4"},[x(K,{product:l},null,8,["product"])]))),128))]),v.value.articles&&!c.value.articles?(a(),s("div",q,[t("button",{onClick:U,class:"btn btn-secondary"},"Mehr Tees")])):p("",!0),!v.value.articles&&r.value.length>0?(a(),s("div",G,e[7]||(e[7]=[t("p",null,"Keine weiteren Tees verf√ºgbar.",-1)]))):p("",!0)]))]))}},ee=F(X,[["__scopeId","data-v-cdf8de41"]]);export{ee as default};
