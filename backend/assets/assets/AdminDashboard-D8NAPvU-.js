import{_ as R,o as r,c as l,a as e,t as i,e as I,n as T,r as o,u as ne,k as oe,l as ie,d as h,F as B,m as L,f as x,S as E,p,P as de,q as ue}from"./index-K1tN9E6u.js";const ce={class:"card h-100 shadow-sm"},ve={class:"card-body"},me={class:"card-title"},he={class:"card-text"},be={class:"card-text"},ge={class:"card-text"},_e={__name:"UserCard",props:{user:{type:Object,required:!0}},setup(v){return(d,n)=>(r(),l("div",ce,[e("div",ve,[e("h5",me,i(v.user.firstName)+" "+i(v.user.lastName),1),e("p",he,[n[0]||(n[0]=e("strong",null,"User-ID: ",-1)),I(i(v.user.id),1)]),e("p",be,[n[1]||(n[1]=e("strong",null,"Email:",-1)),I(" "+i(v.user.emailAddress),1)]),e("p",ge,[n[2]||(n[2]=e("strong",null,"Rolle:",-1)),I(" "+i(v.user.isAdmin?"Admin":"Benutzer"),1)])])]))}},pe=R(_e,[["__scopeId","data-v-022d54c0"]]),ye={props:{order:{type:Object,required:!0}},methods:{formatCurrency(v){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(v)},formatDate(v){return new Date(v).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}}},fe={class:"order-card"},ke={class:"order-header"},we={class:"order-details"},Ce={class:"detail-item"},xe={class:"detail-value"},Ue={class:"detail-item"},Ae={class:"detail-value"},Ne={class:"detail-item"},Se={class:"detail-value"},Fe={class:"detail-item"},$e={class:"detail-value"};function De(v,d,n,f,P,U){return r(),l("div",fe,[e("div",ke,[e("h5",null,"Bestellung ID: "+i(n.order.id),1),e("span",{class:T(["status",n.order.orderStatus])},i(n.order.orderStatus),3)]),e("div",we,[e("p",Ce,[d[0]||(d[0]=e("span",{class:"detail-label"},"Vorname:",-1)),e("span",xe,i(n.order.user.firstName),1)]),e("p",Ue,[d[1]||(d[1]=e("span",{class:"detail-label"},"Nachname:",-1)),e("span",Ae,i(n.order.user.lastName),1)]),e("p",Ne,[d[2]||(d[2]=e("span",{class:"detail-label"},"Gesamtbetrag:",-1)),e("span",Se,i(U.formatCurrency(n.order.totalAmount)),1)]),e("p",Fe,[d[3]||(d[3]=e("span",{class:"detail-label"},"Bestellt am:",-1)),e("span",$e,i(U.formatDate(n.order.createdAt)),1)])])])}const Me=R(ye,[["render",De],["__scopeId","data-v-d67219d3"]]),Be={class:"admin-dashboard"},Le={class:"header"},Pe={key:0,class:"welcome-message"},Oe={class:"stats-row"},Ve={class:"stat-card"},ze={class:"stat-card"},Ie={class:"stat-card orders-card"},Ee={class:"orders-stats"},Je={class:"orders-stat"},Re={class:"stat-value"},Ke={class:"orders-stat"},je={class:"stat-value"},Qe={class:"orders-stat"},Te={class:"stat-value"},Ge={class:"navigation mb-4"},We=["onClick"],qe={key:0},He={class:"search-section mb-4"},Xe={key:0,class:"text-center"},Ye={key:1,class:"text-center"},Ze={key:2},es={class:"row row-cols-lg-4"},ss={class:"text-center mb-5 cardset-admin-button"},ts=["onClick"],as=["onClick"],rs={key:0,class:"text-center mt-4"},ls={key:1,class:"text-center mt-4"},ns={key:1},os={class:"search-section mb-4"},is={key:0,class:"text-center"},ds={key:1,class:"text-center"},us={key:2},cs={class:"row row-cols-lg-4"},vs={class:"text-center mb-5 cardset-admin-button"},ms=["onClick"],hs=["onClick"],bs={key:0,class:"text-center mt-4"},gs={key:1,class:"text-center mt-4"},_s={key:2},ps={class:"search-section mb-4"},ys={key:0,class:"text-center"},fs={key:1,class:"text-center"},ks={key:2},ws={class:"row row-cols-lg-4"},Cs={class:"text-center mb-5 cardset-admin-button"},xs=["onClick"],Us={key:0,class:"text-center mt-4"},As={key:1,class:"text-center mt-4"},Ns={key:3,class:"text-center"},J=8,Ss={__name:"AdminDashboard",setup(v){const d=o("articles"),n=ue(),f=ne(),P=o([{key:"articles",name:"Artikel verwalten"},{key:"users",name:"User verwalten"},{key:"orders",name:"Bestellungen verwalten"},{key:"messages",name:"Nachrichten verwalten"}]),U=oe(()=>!f.user||!f.user.firstName||!f.user.lastName?null:`${f.user.firstName} ${f.user.lastName}`),u=o({articles:!1,users:!1,orders:!1}),_=o([]),K=o([]),k=o(""),F=o({categories:[],price:0,rating:0,page:1,size:8}),A=o(1),c=o({articles:!0,users:!0,orders:!0}),O=async({query:a=k.value,filters:s=F.value}={})=>{a!==k.value&&(k.value=a.trim(),A.value=1,_.value=[],c.value.articles=!0),s&&JSON.stringify(s)!==JSON.stringify(F.value)&&(F.value={...s},A.value=1),u.value.articles=!0;const t=s.categories&&s.categories.length>0?s.categories.join(","):void 0,m=(g=>g&&g!==0?g:void 0)(parseFloat(s.price));try{const g=await p.get("/api/product",{params:{search:a||void 0,categories:t,price:m,rating:s.rating||void 0,page:A.value,size:J}});A.value===1?_.value=g.data.products:_.value.push(...g.data.products),c.value.articles=g.data.hasMore}catch(g){console.error("Fehler beim Laden der Artikel:",g),alert("Fehler beim Laden der Artikel.")}finally{u.value.articles=!1}},G=async()=>{c.value.articles&&(A.value++,await O({query:k.value,filters:F.value}))},W=()=>{n.push({name:"CreateArticle"})},q=()=>{n.push({name:"CreateCategory"})},H=()=>{n.push({name:"EditCategory"})},X=a=>{n.push({name:"EditArticle",params:{id:a.id}})},Y=async a=>{if(window.confirm("Möchten Sie dieses Produkt wirklich löschen?"))try{await p.patch(`/api/product/${a}`,{isDeleted:!0});const t=_.value.find(m=>m.id===a);t&&(t.isDeleted=!0)}catch(t){console.error("Fehler beim Löschen des Produkts:",t),alert("Fehler beim Löschen des Produkts.")}},b=o([]),j=o([]),w=o(""),$=o({role:"",page:1,size:8}),N=o(1),V=async({query:a=w.value,filters:s=$.value}={})=>{a!==w.value&&(w.value=a.trim(),N.value=1,b.value=[],c.value.users=!0),s&&JSON.stringify(s)!==JSON.stringify($.value)&&($.value={...s},N.value=1),u.value.users=!0;try{const t=await p.get("/api/user",{params:{search:a||void 0,role:s.role||void 0,page:N.value,size:J}});N.value===1?b.value=t.data.users:b.value.push(...t.data.users),c.value.users=t.data.hasMore}catch(t){console.error("Fehler beim Laden der User:",t),alert("Fehler beim Laden der User.")}finally{u.value.users=!1}},Z=async()=>{c.value.users&&(N.value++,await V({query:w.value,filters:$.value}))},ee=a=>{n.push({name:"AdminEditUser",params:{id:a.id}})},se=async a=>{if(window.confirm("Möchten Sie diesen User wirklich löschen?"))try{await p.delete(`/api/user/${a}`);const t=b.value.findIndex(m=>m.id===a);t!==-1&&(b.value.splice(t,1),alert("User erfolgreich gelöscht."))}catch(t){console.error("Fehler beim Löschen des Users:",t),alert("Fehler beim Löschen des Users.")}},y=o([]),D=o([]),C=o(""),M=o({status:"",page:1,size:8}),S=o(1),z=async({query:a=C.value,filters:s=M.value}={})=>{a!==C.value&&(C.value=a.trim(),S.value=1,y.value=[],c.value.orders=!0),s&&JSON.stringify(s)!==JSON.stringify(M.value)&&(M.value={...s},S.value=1),u.value.orders=!0;try{const t=await p.get("/api/order",{params:{search:a||void 0,status:s.status||void 0,page:S.value,size:J}});S.value===1?y.value=t.data.orders:y.value.push(...t.data.orders),c.value.orders=t.data.hasMore}catch(t){console.error("Fehler beim Laden der Bestellungen:",t),alert("Fehler beim Laden der Bestellungen.")}finally{u.value.orders=!1}},te=async()=>{c.value.orders&&(S.value++,await z({query:C.value,filters:M.value}))},ae=a=>{n.push({name:"ViewOrder",params:{id:a}})},re=async()=>{try{const a=await p.get("/api/product/count");K.value=a.data}catch(a){console.error("Fehler beim Abrufen der Artikel Metadaten:",a.message)}try{const a=await p.get("/api/user/count");j.value=a.data}catch(a){console.error("Fehler beim Abrufen der User Metadaten:",a.message)}try{const a=await p.get("/api/order/count");D.value=a.data}catch(a){console.error("Fehler beim Abrufen der User Metadaten:",a.message)}},Q=a=>{switch(a){case"articles":O();break;case"users":V();break;case"orders":z();break;case"messages":n.push({name:"Message"});break}},le=a=>{d.value=a,a!=="messages"&&localStorage.setItem("adminDashboardPanel",a),Q(a)};return ie(()=>{const a=localStorage.getItem("adminDashboardPanel");a&&P.value.some(s=>s.key===a)&&(d.value=a),Q(d.value),re()}),(a,s)=>(r(),l("div",Be,[e("div",Le,[s[9]||(s[9]=e("h1",{class:"text-center admin-title"},"Admin Dashboard",-1)),U.value?(r(),l("h2",Pe," Willkommen zurück, "+i(U.value)+"! ",1)):h("",!0),e("div",Oe,[e("div",Ve,[s[3]||(s[3]=e("h3",null,"Artikel",-1)),e("h3",null,i(K.value||0),1)]),e("div",ze,[s[4]||(s[4]=e("h3",null,"User",-1)),e("h3",null,i(j.value||0),1)]),e("div",Ie,[s[8]||(s[8]=e("h3",null,"Bestellungen",-1)),e("div",Ee,[e("div",Je,[s[5]||(s[5]=e("span",{class:"stat-label"},"Gesamt:",-1)),e("span",Re,i(D.value.total||0),1)]),e("div",Ke,[s[6]||(s[6]=e("span",{class:"stat-label"},"Abgeschlossen:",-1)),e("span",je,i(D.value.finished||0),1)]),e("div",Qe,[s[7]||(s[7]=e("span",{class:"stat-label"},"Offen:",-1)),e("span",Te,i(D.value.active||0),1)])])])])]),e("div",Ge,[(r(!0),l(B,null,L(P.value,t=>(r(),l("button",{key:t.key,onClick:m=>le(t.key),class:T(["btn navigation-btn",d.value===t.key?"btn-active":"btn-outline"])},i(t.name),11,We))),128))]),d.value==="articles"?(r(),l("div",qe,[e("div",He,[x(E,{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=t=>k.value=t),onSearch:O,placeholder:"Artikel suchen...",showFilter:!0},null,8,["modelValue"])]),e("div",{class:"text-center mt-4 mb-4",style:{display:"flex","justify-content":"center",gap:"10px"}},[e("button",{onClick:W,class:"btn btn-primary",style:{width:"100%"}}," Neuen Artikel erstellen "),e("button",{onClick:q,class:"btn btn-primary",style:{width:"100%"}}," Neue Kategorien erstellen "),e("button",{onClick:H,class:"btn btn-primary",style:{width:"100%"}}," Kategorien bearbeiten ")]),u.value.articles&&_.value.length===0?(r(),l("div",Xe,s[10]||(s[10]=[e("p",null,"Lade Artikel...",-1)]))):h("",!0),!u.value.articles&&_.value.length===0?(r(),l("div",Ye,s[11]||(s[11]=[e("p",null,"Keine Produkte gefunden.",-1)]))):(r(),l("div",Ze,[e("div",es,[(r(!0),l(B,null,L(_.value,t=>(r(),l("div",{key:t.id,class:"col mb-4"},[e("div",null,[x(de,{product:t},null,8,["product"])]),e("div",ss,[e("button",{onClick:m=>X(t),class:"btn btn-warning"},"Bearbeiten",8,ts),t.isDeleted?h("",!0):(r(),l("button",{key:0,onClick:m=>Y(t.id),class:"btn btn-danger"}," Löschen ",8,as))])]))),128))]),c.value.articles&&!u.value.articles?(r(),l("div",rs,[e("button",{onClick:G,class:"btn btn-secondary"},"Mehr Tees")])):h("",!0),!c.value.articles&&_.value.length>0?(r(),l("div",ls,s[12]||(s[12]=[e("p",null,"Keine weiteren Tees verfügbar.",-1)]))):h("",!0)]))])):d.value==="users"?(r(),l("div",ns,[e("div",os,[x(E,{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=t=>w.value=t),onSearch:V,placeholder:"User suchen...",showFilter:!1},null,8,["modelValue"])]),u.value.users&&b.value.length===0?(r(),l("div",is,s[13]||(s[13]=[e("p",null,"Lade User...",-1)]))):h("",!0),!u.value.users&&b.value.length===0?(r(),l("div",ds,s[14]||(s[14]=[e("p",null,"Keine User gefunden.",-1)]))):(r(),l("div",us,[e("div",cs,[(r(!0),l(B,null,L(b.value,t=>(r(),l("div",{key:t.id,class:"col mb-4"},[e("div",null,[x(pe,{user:t},null,8,["user"])]),e("div",vs,[e("button",{onClick:m=>ee(t),class:"btn btn-warning"},"Bearbeiten",8,ms),e("button",{onClick:m=>se(t.id),class:"btn btn-danger"},"Löschen",8,hs)])]))),128))]),c.value.users&&!u.value.users?(r(),l("div",bs,[e("button",{onClick:Z,class:"btn btn-secondary"},"Mehr User")])):h("",!0),!c.value.users&&b.value.length>0?(r(),l("div",gs,s[15]||(s[15]=[e("p",null,"Keine weiteren User verfügbar.",-1)]))):h("",!0)]))])):d.value==="orders"?(r(),l("div",_s,[e("div",ps,[x(E,{modelValue:C.value,"onUpdate:modelValue":s[2]||(s[2]=t=>C.value=t),onSearch:z,placeholder:"Suche nach ID, Status oder Name",showFilter:!1},null,8,["modelValue"])]),u.value.orders&&y.value.length===0?(r(),l("div",ys,s[16]||(s[16]=[e("p",null,"Lade Bestellungen...",-1)]))):h("",!0),!u.value.orders&&y.value.length===0?(r(),l("div",fs,s[17]||(s[17]=[e("p",null,"Keine Bestellungen gefunden.",-1)]))):(r(),l("div",ks,[e("div",ws,[(r(!0),l(B,null,L(y.value,t=>(r(),l("div",{key:t.id,class:"col mb-4"},[e("div",null,[x(Me,{order:t},null,8,["order"])]),e("div",Cs,[e("button",{onClick:m=>ae(t.id),class:"btn btn-warning"},"Details",8,xs)])]))),128))]),c.value.orders&&!u.value.orders?(r(),l("div",Us,[e("button",{onClick:te,class:"btn btn-secondary"},"Mehr Bestellungen")])):h("",!0),!c.value.orders&&y.value.length>0?(r(),l("div",As,s[18]||(s[18]=[e("p",null,"Keine weiteren Bestellungen verfügbar.",-1)]))):h("",!0)]))])):(r(),l("div",Ns,s[19]||(s[19]=[e("p",null,"Bitte wählen Sie einen Verwaltungsbereich aus.",-1)])))]))}},$s=R(Ss,[["__scopeId","data-v-a3b11a09"]]);export{$s as default};
