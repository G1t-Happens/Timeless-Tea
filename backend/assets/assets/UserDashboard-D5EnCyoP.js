import{_ as x,u as U,k as A,r as o,l as M,c as a,a as t,t as w,d as p,f as k,S as C,F as P,m as V,p as D,o as s,P as T,q as z}from"./index-BQPN_HOS.js";const B={class:"user-dashboard"},L={class:"header"},O={key:0,class:"welcome-message"},K={class:"search-section mb-4"},E={key:0,class:"text-center"},J={key:1,class:"text-center"},$={key:2},j={class:"row row-cols-lg-4"},I={key:0,class:"text-center mt-4"},Q={key:1,class:"text-center mt-4"},R=8,W={__name:"UserDashboard",setup(q){const h=z(),i=U(),_=A(()=>!i.user||!i.user.firstName||!i.user.lastName?null:`${i.user.firstName} ${i.user.lastName}`),f=()=>{h.push({name:"OrderDetail"})},y=()=>{h.push({name:"Favorites"})},F=()=>{h.push({name:"UserEditUser"})},r=o([]),n=o(""),c=o({articles:!1}),g=o({categories:[],price:0,rating:0,page:1,size:8}),u=o(1),d=o({articles:!0}),b=async({query:m=n.value,filters:e=g.value}={})=>{m!==n.value&&(n.value=m.trim(),u.value=1,r.value=[],d.value.articles=!0),e&&JSON.stringify(e)!==JSON.stringify(g.value)&&(g.value={...e},u.value=1),c.value.articles=!0;const l=e.categories&&e.categories.length>0?e.categories.join(","):void 0,S=e.price&&e.price!==0?e.price:void 0;try{const v=await D.get("/api/product",{params:{search:m||void 0,categories:l,price:S,rating:e.rating||void 0,page:u.value,size:R}});u.value===1?r.value=v.data.products:r.value.push(...v.data.products),d.value.articles=v.data.hasMore}catch(v){console.error("Fehler beim Laden der Artikel:",v),alert("Fehler beim Laden der Artikel.")}finally{c.value.articles=!1}},N=async()=>{d.value.articles&&(u.value++,await b({query:n.value,filters:g.value}))};return M(()=>{b()}),(m,e)=>(s(),a("div",B,[t("div",L,[e[1]||(e[1]=t("h1",{class:"text-center user-title"},"User Dashboard",-1)),_.value?(s(),a("h2",O," Willkommen zurück, "+w(_.value)+"! ",1)):p("",!0)]),t("div",{class:"navigation mb-4"},[t("button",{onClick:f,class:"btn navigation-btn"},"Meine Bestellungen"),t("button",{onClick:y,class:"btn navigation-btn"},"Meine Favoriten"),t("button",{onClick:F,class:"btn navigation-btn"}," Meine Kontoeinstellungen ")]),t("div",K,[k(C,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=l=>n.value=l),onSearch:b,placeholder:"Artikel suchen...",showFilter:!0},null,8,["modelValue"])]),c.value.articles&&r.value.length===0?(s(),a("div",E,e[2]||(e[2]=[t("p",null,"Lade Artikel...",-1)]))):p("",!0),!c.value.articles&&r.value.length===0?(s(),a("div",J,e[3]||(e[3]=[t("p",null,"Keine Produkte gefunden.",-1)]))):(s(),a("div",$,[t("div",j,[(s(!0),a(P,null,V(r.value,l=>(s(),a("div",{key:l.id,class:"col mb-4"},[k(T,{product:l},null,8,["product"])]))),128))]),d.value.articles&&!c.value.articles?(s(),a("div",I,[t("button",{onClick:N,class:"btn btn-secondary"},"Mehr Tees")])):p("",!0),!d.value.articles&&r.value.length>0?(s(),a("div",Q,e[4]||(e[4]=[t("p",null,"Keine weiteren Tees verfügbar.",-1)]))):p("",!0)]))]))}},H=x(W,[["__scopeId","data-v-45268b58"]]);export{H as default};
