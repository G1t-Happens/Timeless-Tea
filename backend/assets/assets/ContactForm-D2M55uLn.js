import{_ as D,r as f,k as B,B as _,c as i,a as t,n as u,b as v,v as h,t as n,d as m,x as E,w as V,o,p as C,q as N}from"./index-CZW32xBW.js";const F={class:"contact-form"},z={key:0,class:"error"},U={key:0,class:"error"},Z={key:0,class:"error"},q={class:"char-count"},A={key:0,class:"error"},P={class:"slider-label"},K={class:"slider-container"},T={key:0,class:"error"},W={class:"button-group"},$=["disabled"],L={key:0,class:"success-message"},d=500,O={__name:"ContactForm",setup(G){const s=f({name:"",email:"",subject:"",message:"",privacy:!1}),e=f({name:"",email:"",subject:"",message:"",privacy:"",server:""}),g=f(""),w=B(()=>s.value.message.length);_(()=>s.value.message,l=>{l.length>d?e.value.message=`Die Nachricht darf max. ${d} Zeichen lang sein.`:e.value.message=""});function b(){const l=s.value.name.trim();l?l.length>60?e.value.name="Der Name darf max. 60 Zeichen lang sein.":e.value.name="":e.value.name="Bitte geben Sie Ihren Namen ein."}function y(){const l=s.value.email.trim();l?/\S+@\S+\.\S+/.test(l)?l.length>100?e.value.email="Die E-Mail-Adresse darf max. 100 Zeichen lang sein.":e.value.email="":e.value.email="Bitte geben Sie eine gültige E-Mail-Adresse ein.":e.value.email="Bitte geben Sie Ihre E-Mail-Adresse ein."}function x(){const l=s.value.subject.trim();l?l.length>50?e.value.subject="Der Betreff darf max. 50 Zeichen lang sein.":e.value.subject="":e.value.subject="Bitte geben Sie einen Betreff ein."}function S(){const l=s.value.message;if(!l.trim()){e.value.message="Bitte geben Sie eine Nachricht ein.";return}if(l.length>d){e.value.message=`Die Nachricht darf max. ${d} Zeichen lang sein.`;return}e.value.message=""}function j(){s.value.privacy?e.value.privacy="":e.value.privacy="Sie müssen den Datenschutzbestimmungen zustimmen."}const p=B(()=>{const l=e.value.name||e.value.email||e.value.subject||e.value.message||e.value.privacy||e.value.server,a=!!s.value.name.trim(),r=!!s.value.email.trim(),c=!!s.value.subject.trim(),I=!!s.value.message.trim(),M=s.value.privacy;return!l&&a&&r&&c&&I&&M});async function k(){var l,a,r;if(b(),y(),x(),S(),j(),!!p.value)try{await C.post("/api/message",s.value),g.value="Vielen Dank! Ihre Nachricht wurde erfolgreich gesendet.",await N.fire({title:"Nachricht gesendet!",text:"Vielen Dank, wir werden uns in Kürze bei Ihnen melden.",icon:"success",showConfirmButton:!1,timer:2e3,timerProgressBar:!0}),s.value={name:"",email:"",subject:"",message:"",privacy:!1},e.value={}}catch(c){console.error("Fehler beim Senden der Nachricht:",((l=c.response)==null?void 0:l.data)||c.message),e.value.server="Es gab ein Problem beim Senden. Bitte versuchen Sie es später erneut.",await N.fire({title:"Fehler beim Senden der Nachricht!",text:((r=(a=c.response)==null?void 0:a.data)==null?void 0:r.error)||"Es ist ein unbekannter Fehler aufgetreten. Bitte versuchen Sie es später erneut.",icon:"error",showConfirmButton:!0,confirmButtonText:"OK"})}}return(l,a)=>(o(),i("div",F,[a[11]||(a[11]=t("h2",{class:"page-title"},"Kontaktformular",-1)),a[12]||(a[12]=t("p",null,"Wenn Sie Fragen haben oder Unterstützung benötigen, senden Sie uns bitte eine Nachricht.",-1)),t("form",{onSubmit:V(k,["prevent"]),class:"form-container"},[t("div",{class:u(["form-group",{"has-error":e.value.name}])},[a[5]||(a[5]=t("label",{for:"name",class:"form-label"},"Ihr Name",-1)),v(t("input",{id:"name",type:"text","onUpdate:modelValue":a[0]||(a[0]=r=>s.value.name=r),class:"form-control",placeholder:"Max Mustermann",onInput:b,maxlength:"60",required:""},null,544),[[h,s.value.name]]),e.value.name?(o(),i("span",z,n(e.value.name),1)):m("",!0)],2),t("div",{class:u(["form-group",{"has-error":e.value.email}])},[a[6]||(a[6]=t("label",{for:"email",class:"form-label"},"Ihre E-Mail-Adresse",-1)),v(t("input",{id:"email",type:"email","onUpdate:modelValue":a[1]||(a[1]=r=>s.value.email=r),class:"form-control",placeholder:"max@beispiel.de",onInput:y,maxlength:"100",required:""},null,544),[[h,s.value.email]]),e.value.email?(o(),i("span",U,n(e.value.email),1)):m("",!0)],2),t("div",{class:u(["form-group",{"has-error":e.value.subject}])},[a[7]||(a[7]=t("label",{for:"subject",class:"form-label"},"Betreff",-1)),v(t("input",{id:"subject",type:"text","onUpdate:modelValue":a[2]||(a[2]=r=>s.value.subject=r),class:"form-control",placeholder:"Worum geht es?",onInput:x,maxlength:"50",required:""},null,544),[[h,s.value.subject]]),e.value.subject?(o(),i("span",Z,n(e.value.subject),1)):m("",!0)],2),t("div",{class:u(["form-group",{"has-error":e.value.message}])},[a[8]||(a[8]=t("label",{for:"message",class:"form-label"},"Ihre Nachricht",-1)),v(t("textarea",{id:"message","onUpdate:modelValue":a[3]||(a[3]=r=>s.value.message=r),class:"form-control",rows:"5",placeholder:"Schreiben Sie hier Ihre Nachricht...",onInput:S,maxlength:"500",required:""},null,544),[[h,s.value.message]]),t("small",q,n(w.value)+" von "+n(d)+" Zeichen verwendet ",1),e.value.message?(o(),i("span",A,n(e.value.message),1)):m("",!0)],2),t("div",{class:u(["form-group toggle-switch",{"has-error":e.value.privacy}])},[t("label",P,[t("span",K,[v(t("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=r=>s.value.privacy=r),onChange:j},null,544),[[E,s.value.privacy]]),a[9]||(a[9]=t("span",{class:"slider round"},null,-1))]),a[10]||(a[10]=t("span",{class:"small-label"}," Ich stimme den Datenschutzbestimmungen zu. ",-1))]),e.value.privacy?(o(),i("span",T,n(e.value.privacy),1)):m("",!0)],2),t("div",W,[t("button",{type:"submit",class:u(["btn btn-primary",{"btn-disabled":!p.value}]),disabled:!p.value,style:{width:"100%"}}," Nachricht senden ",10,$)])],32),g.value?(o(),i("p",L,n(g.value),1)):m("",!0)]))}},J=D(O,[["__scopeId","data-v-b9cd7090"]]);export{J as default};
